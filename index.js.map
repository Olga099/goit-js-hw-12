{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48925713-6281e076b4b07f0ec4ad03690';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 40;\n\nexport async function fetchImages(query, page) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: PER_PAGE,\n                page: page,\n            },\n        });\n\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nlet lightbox = new SimpleLightbox('.gallery a');\n\nexport function renderImages(images) {\n    const markup = images.map(image => `\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" title=\"Likes: ${image.likes}, Views: ${image.views}, Comments: ${image.comments}, Downloads: ${image.downloads}\"/>\n        </a>\n    `).join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}\n\nexport function smoothScroll() {\n    const { height } = gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: height * 2,\n        behavior: 'smooth',\n    });\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery, smoothScroll } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nlet query = '';\nlet page = 1;\nconst PER_PAGE = 40;\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    \n    query = event.target.elements.searchQuery.value.trim();\n    if (!query) {\n        iziToast.warning({ title: 'Warning', message: 'Please enter a search term!' });\n        return;\n    }\n\n    page = 1;\n    clearGallery();\n    loadMoreBtn.style.display = 'none';\n    loader.style.display = 'block';\n\n    try {\n        const data = await fetchImages(query, page);\n        if (data.hits.length === 0) {\n            iziToast.error({ title: 'Error', message: 'Sorry, there are no images matching your search query. Please try again!' });\n        } else {\n            renderImages(data.hits);\n            if (data.totalHits > PER_PAGE) {\n                loadMoreBtn.style.display = 'block';\n            }\n        }\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: 'Something went wrong. Please try again later.' });\n    }\n\n    loader.style.display = 'none';\n    form.reset();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n    loader.style.display = 'block';\n\n    try {\n        const data = await fetchImages(query, page);\n        renderImages(data.hits);\n        smoothScroll();\n\n        const maxPages = Math.ceil(data.totalHits / PER_PAGE);\n        if (page >= maxPages) {\n            loadMoreBtn.style.display = 'none';\n            iziToast.info({ title: 'Info', message: \"We're sorry, but you've reached the end of search results.\" });\n        }\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: 'Something went wrong. Please try again later.' });\n    }\n\n    loader.style.display = 'none';\n});\n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","axios","error","gallery","lightbox","SimpleLightbox","renderImages","images","markup","image","clearGallery","smoothScroll","height","form","loadMoreBtn","loader","event","iziToast","data","maxPages"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAW,GAEV,eAAeC,EAAYC,EAAOC,EAAM,CAC3C,GAAI,CAaA,OAZiB,MAAMC,EAAM,IAAIL,EAAU,CACvC,OAAQ,CACJ,IAAKD,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUF,EACV,KAAMG,CACT,CACb,CAAS,GAEe,IACnB,OAAQE,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACT,CACL,CCtBA,MAAMC,EAAU,SAAS,cAAc,UAAU,EACjD,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAEvC,SAASC,EAAaC,EAAQ,CACjC,MAAMC,EAASD,EAAO,IAAIE,GAAS;AAAA,mBACpBA,EAAM,aAAa;AAAA,wBACdA,EAAM,YAAY,UAAUA,EAAM,IAAI,mBAAmBA,EAAM,KAAK,YAAYA,EAAM,KAAK,eAAeA,EAAM,QAAQ,gBAAgBA,EAAM,SAAS;AAAA;AAAA,KAE1K,EAAE,KAAK,EAAE,EAEVN,EAAQ,mBAAmB,YAAaK,CAAM,EAC9CJ,EAAS,QAAO,CACpB,CAEO,SAASM,GAAe,CAC3BP,EAAQ,UAAY,EACxB,CAEO,SAASQ,GAAe,CAC3B,KAAM,CAAE,OAAAC,CAAQ,EAAGT,EAAQ,kBAAkB,sBAAqB,EAClE,OAAO,SAAS,CACZ,IAAKS,EAAS,EACd,SAAU,QAClB,CAAK,CACL,CCtBA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAClC,SAAS,cAAc,UAAU,EACjD,MAAMC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIhB,EAAQ,GACRC,EAAO,EACX,MAAMH,EAAW,GAEjBgB,EAAK,iBAAiB,SAAU,MAAOG,GAAU,CAI7C,GAHAA,EAAM,eAAc,EAEpBjB,EAAQiB,EAAM,OAAO,SAAS,YAAY,MAAM,OAC5C,CAACjB,EAAO,CACRkB,EAAS,QAAQ,CAAE,MAAO,UAAW,QAAS,6BAA6B,CAAE,EAC7E,MACH,CAEDjB,EAAO,EACPU,IACAI,EAAY,MAAM,QAAU,OAC5BC,EAAO,MAAM,QAAU,QAEvB,GAAI,CACA,MAAMG,EAAO,MAAMpB,EAAYC,EAAOC,CAAI,EACtCkB,EAAK,KAAK,SAAW,EACrBD,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,0EAA0E,CAAE,GAEtHX,EAAaY,EAAK,IAAI,EAClBA,EAAK,UAAYrB,IACjBiB,EAAY,MAAM,QAAU,SAGvC,MAAe,CACZG,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,+CAA+C,CAAE,CAC9F,CAEDF,EAAO,MAAM,QAAU,OACvBF,EAAK,MAAK,CACd,CAAC,EAEDC,EAAY,iBAAiB,QAAS,SAAY,CAC9Cd,GAAQ,EACRe,EAAO,MAAM,QAAU,QAEvB,GAAI,CACA,MAAMG,EAAO,MAAMpB,EAAYC,EAAOC,CAAI,EAC1CM,EAAaY,EAAK,IAAI,EACtBP,IAEA,MAAMQ,EAAW,KAAK,KAAKD,EAAK,UAAYrB,CAAQ,EAChDG,GAAQmB,IACRL,EAAY,MAAM,QAAU,OAC5BG,EAAS,KAAK,CAAE,MAAO,OAAQ,QAAS,4DAA4D,CAAE,EAE7G,MAAe,CACZA,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,+CAA+C,CAAE,CAC9F,CAEDF,EAAO,MAAM,QAAU,MAC3B,CAAC"}